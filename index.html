<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Business Club - Order Now</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-section { opacity: 0; transition: opacity 0.8s ease-in-out; }
    .fade-section.visible { opacity: 1; }
    .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; z-index: 1000; }
    .modal-content { background: #1f2937; padding: 2rem; border-radius: 1rem; max-width: 550px; width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 50px rgba(0,0,0,0.7); }
    input:focus, textarea:focus { outline: 3px solid #60a5fa; }
    .loading { pointer-events: none; opacity: 0.7; }
  </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">

  <!-- Navbar -->
  <nav class="w-full flex justify-between items-center p-5 bg-gray-800 fixed top-0 z-50 shadow-xl backdrop-blur-sm bg-opacity-90">
    <div class="text-2xl font-bold text-blue-400">Student Business Club</div>
    <div class="space-x-8 text-lg">
      <a href="#home" class="hover:text-blue-400 transition">Home</a>
      <a href="#about" class="hover:text-blue-400 transition">About</a>
      <a href="#order" class="hover:text-blue-400 transition">Order</a>
      <a href="#contact" class="hover:text-blue-400 transition">Contact</a>
    </div>
  </nav>

  <!-- Hero -->
  <section id="home" class="min-h-screen flex items-center justify-center p-6 fade-section visible">
    <div class="text-center max-w-4xl">
      <h1 class="text-5xl md:text-7xl font-extrabold mb-6 bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-500 bg-clip-text text-transparent">
        Student Business Club
      </h1>
      <p class="text-xl md:text-2xl mb-10 text-gray-300">Handmade with love by students • Supporting real entrepreneurship</p>
      <a href="#order" class="inline-block px-10 py-5 bg-blue-600 text-xl font-bold rounded-full hover:bg-blue-700 transform hover:scale-110 transition duration-300 shadow-2xl">
        Order Products Now
      </a>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="min-h-screen flex items-center justify-center p-8 fade-section">
    <div class="max-w-4xl text-center">
      <h2 class="text-5xl font-bold mb-8 text-blue-400">About Our Club</h2>
      <p class="text-xl leading-relaxed text-gray-300">
        We are a student-run business club that teaches entrepreneurship by making and selling real products: 
        <strong>liquid soap</strong>, <strong>fresh bread</strong>, and more. Every order helps students learn real business skills!
      </p>
    </div>
  </section>

  <!-- Order Form -->
  <section id="order" class="min-h-screen flex flex-col items-center justify-center p-6 fade-section pt-32">
    <h2 class="text-5xl font-bold mb-12 text-blue-400">Place Your Order</h2>

    <form id="orderForm" class="w-full max-w-3xl bg-gray-800 p-10 rounded-3xl shadow-2xl border border-gray-700 space-y-8">
      <!-- Customer Info -->
      <div class="grid md:grid-cols-3 gap-6">
        <input type="text" name="name" placeholder="Your Full Name" class="p-4 rounded-xl bg-gray-700 text-lg" required />
        <input type="email" name="email" placeholder="Email Address" class="p-4 rounded-xl bg-gray-700 text-lg" required />
        <input type="tel" name="tel" placeholder="Phone Number (e.g. 078...)" class="p-4 rounded-xl bg-gray-700 text-lg" required />
      </div>

      <!-- Product Selection -->
      <div class="space-y-6">
        <p class="text-2xl font-bold text-blue-300">Choose Products</p>
        
        <label class="flex items-center space-x-4 text-xl bg-gray-700 p-4 rounded-xl cursor-pointer hover:bg-gray-600 transition">
          <input type="checkbox" id="productSoap" class="w-6 h-6">
          <span>Liquid Soap</span>
        </label>

        <label class="flex items-center space-x-4 text-xl bg-gray-700 p-4 rounded-xl cursor-pointer hover:bg-gray-600 transition">
          <input type="checkbox" id="productBread" class="w-6 h-6">
          <span>Fresh Bread</span>
        </label>
      </div>

      <!-- Liquid Soap Options -->
      <div id="soapOptions" class="hidden space-y-6 bg-gray-700 p-8 rounded-2xl border border-blue-500">
        <h3 class="text-2xl font-bold text-blue-300">Liquid Soap</h3>
        <div class="space-y-6">
          <div>
            <label class="flex justify-between items-center text-lg">
              <div class="flex items-center space-x-3">
                <input type="radio" name="soapSize" value="3L" class="w-5 h-5">
                <span>3 Litres</span>
              </div>
              <span class="font-bold text-green-400">2,500 RWF</span>
            </label>
            <input type="number" id="soapCount3L" placeholder="How many containers?" min="1" class="hidden w-full mt-3 p-4 rounded-lg bg-gray-600" disabled />
          </div>
          <div>
            <label class="flex justify-between items-center text-lg">
              <div class="flex items-center space-x-3">
                <input type="radio" name="soapSize" value="5L" class="w-5 h-5">
                <span>5 Litres</span>
              </div>
              <span class="font-bold text-green-400">4,000 RWF</span>
            </label>
            <input type="number" id="soapCount5L" placeholder="How many containers?" min="1" class="hidden w-full mt-3 p-4 rounded-lg bg-gray-600" disabled />
          </div>
        </div>
      </div>

      <!-- Bread Options -->
      <div id="breadOptions" class="hidden space-y-6 bg-gray-700 p-8 rounded-2xl border border-blue-500">
        <h3 class="text-2xl font-bold text-blue-300">Fresh Bread</h3>
        <div class="space-y-6">
          <div>
            <label class="flex justify-between items-center text-lg">
              <div class="flex items-center space-x-3">
                <input type="radio" name="breadSize" value="10pack" class="w-5 h-5">
                <span>10-piece pack (small)</span>
              </div>
              <span class="font-bold text-green-400">1,500 R 1,500 RWF</span>
            </label>
            <input type="number" id="breadCount10" placeholder="How many packs?" min="1" class="hidden w-full mt-3 p-4 rounded-lg bg-gray-600" disabled />
          </div>
          <div>
            <label class="flex justify-between items-center text-lg">
              <div class="flex items-center space-x-3">
                <input type="radio" name="breadSize" value="6pack" class="w-5 h-5">
                <span>6-piece pack (large)</span>
              </div>
              <span class="font-bold text-green-400">2,000 RWF</span>
            </label>
            <input type="number" id="breadCount6" placeholder="How many packs?" min="1" class="hidden w-full mt-3 p-4 rounded-lg bg-gray-600" disabled />
          </div>
        </div>
      </div>

      <button type="button" id="confirmOrderBtn" class="w-full py-5 bg-gradient-to-r from-blue-600 to-cyan-600 text-2xl font-bold rounded-xl hover:from-blue-700 hover:to-cyan-700 transform hover:scale-105 transition duration-300 shadow-xl">
        Review My Order
      </button>
    </form>

    <!-- Confirmation Modal -->
    <div id="orderModal" class="modal">
      <div class="modal-content text-gray-200">
        <h3 class="text-3xl font-bold mb-6 text-blue-400 text-center">Confirm Your Order</h3>
        <div id="orderSummary" class="space-y-4 text-lg"></div>
        <div class="mt-8 pt-6 border-t-2 border-gray-600">
          <div class="text-3xl font-bold text-right text-green-400" id="totalPrice">Total: 0 RWF</div>
        </div>
        <div class="flex justify-between mt-10">
          <button id="cancelOrder" class="px-8 py-4 bg-gray-600 rounded-xl text-xl hover:bg-gray-700 transition">Cancel</button>
          <button id="submitOrder" class="px-10 py-4 bg-green-600 rounded-xl text-xl font-bold hover:bg-green-700 transform hover:scale-110 transition shadow-xl relative">
            Sending Order...
          </button>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Fade in
    const observer = new IntersectionObserver(e => e.forEach(en => en.isIntersecting && en.target.classList.add('visible')), { threshold: 0.1 });
    document.querySelectorAll('.fade-section').forEach(el => observer.observe(el));

    // Toggle options
    document.getElementById('productSoap').addEventListener('change', e => document.getElementById('soapOptions').classList.toggle('hidden', !e.target.checked));
    document.getElementById('productBread').addEventListener('change', e => document.getElementById('breadOptions').classList.toggle('hidden', !e.target.checked));

    // Show quantity inputs
    document.querySelectorAll('input[name="soapSize"]').forEach(r => r.addEventListener('change', () => {
      document.getElementById('soapCount3L').classList.toggle('hidden', r.value !== '3L'); document.getElementById('soapCount3L').disabled = r.value !== '3L';
      document.getElementById('soapCount5L').classList.toggle('hidden', r.value !== '5L'); document.getElementById('soapCount5L').disabled = r.value !== '5L';
      if (r.checked) setTimeout(() => document.getElementById(`soapCount${r.value}`).focus(), 100);
    }));
    document.querySelectorAll('input[name="breadSize"]').forEach(r => r.addEventListener('change', () => {
      const is10 = r.value === '10pack';
      document.getElementById('breadCount10').classList.toggle('hidden', !is10); document.getElementById('breadCount10').disabled = !is10;
      document.getElementById('breadCount6').classList.toggle('hidden', is10); document.getElementById('breadCount6').disabled = is10;
      if (r.checked) setTimeout(() => document.getElementById(is10 ? 'breadCount10' : 'breadCount6').focus(), 100);
    }));

    const MAKE_WEBHOOK = "https://hook.us2.make.com/ygz8rqdikqtsgsrpe43pqy5249vnvnyj";

    document.getElementById('confirmOrderBtn').addEventListener('click', () => {
      const name = document.querySelector('[name="name"]').value.trim();
      const email = document.querySelector('[name="email"]').value.trim();
      const tel = document.querySelector('[name="tel"]').value.trim();

      if (!name || !email || !tel) return alert("Please fill in your name, email, and phone.");

      let items = [];
      let total = 0;

      if (document.getElementById('productSoap').checked) {
        const size = document.querySelector('input[name="soapSize"]:checked');
        if (size) {
          const qty = parseInt(document.getElementById(size.value === '3L' ? 'soapCount3L' : 'soapCount5L').value) || 0;
          if (qty > 0) {
            const price = size.value === '3L' ? 2500 : 4000;
            total += price * qty;
            items.push(`Liquid Soap ${size.value} × ${qty} = ${price * qty} RWF`);
          }
        }
      }

      if (document.getElementById('productBread').checked) {
        const size = document.querySelector('input[name="breadSize"]:checked');
        if (size) {
          const qty = parseInt(document.getElementById(size.value === '10pack' ? 'breadCount10' : 'breadCount6').value) || 0;
          if (qty > 0) {
            const price = size.value === '10pack' ? 1500 : 2000;
            total += price * qty;
            items.push(`Bread ${size.value === '10pack' ? '10-piece' : '6-piece large'} × ${qty} = ${price * qty} RWF`);
          }
        }
      }

      if (items.length === 0) return alert("Please select at least one product with quantity.");

      const summary = `<p class="text-xl"><strong>Name:</strong> ${name}</p>
                       <p><strong>Email:</strong> ${email}</p>
                       <p><strong>Phone:</strong> ${tel}</p>
                       <hr class="my-4 border-gray-500">
                       <p class="text-2xl font-bold text-blue-300 mb-4">Order Items:</p>
                       ${items.map(i => `<p class="text-lg">• ${i}</p>`).join('')}`;

      document.getElementById('orderSummary').innerHTML = summary;
      document.getElementById('totalPrice').textContent = `Total: ${total.toLocaleString()} RWF`;
      document.getElementById('orderModal').style.display = 'flex';
    });

    // SUBMIT TO MAKE.COM
    document.getElementById('submitOrder').addEventListener('click', async () => {
      const btn = document.getElementById('submitOrder');
      btn.classList.add('loading');
      btn.textContent = "Sending...";

      const name = document.querySelector('[name="name"]').value.trim();
      const email = document.querySelector('[name="email"]').value.trim();
      const tel = document.querySelector('[name="tel"]').value.trim();
      const total = document.getElementById('totalPrice').textContent;

      let orderDetails = [];
      if (document.getElementById('productSoap').checked) {
        const size = document.querySelector('input[name="soapSize"]:checked');
        if (size) {
          const qty = parseInt(document.getElementById(size.value === '3L' ? 'soapCount3L' : 'soapCount5L').value) || 0;
          if (qty > 0) orderDetails.push(`Soap ${size.value} × ${qty}`);
        }
      }
      if (document.getElementById('productBread').checked) {
        const size = document.querySelector('input[name="breadSize"]:checked');
        if (size) {
          const qty = parseInt(document.getElementById(size.value === '10pack' ? 'breadCount10' : 'breadCount6').value) || 0;
          if (qty > 0) orderDetails.push(`Bread ${size.value === '10pack' ? '10-pc' : '6-pc large'} × ${qty}`);
        }
      }

      const payload = {
        name, email, phone: tel, total, items: orderDetails.join(" | "), timestamp: new Date().toLocaleString('en-GB')
      };

      try {
        const response = await fetch(MAKE_WEBHOOK, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        if (response.ok) {
          alert("Order sent successfully! We will contact you soon.");
          document.getElementById('orderModal').style.display = 'none';
          document.getElementById('orderForm').reset();
          document.querySelectorAll('#soapOptions, #breadOptions').forEach(el => el.classList.add('hidden'));
        } else {
          alert("There was a problem. Please try again or call us directly.");
        }
      } catch (err) {
        alert("No internet connection. Please try again when online.");
      } finally {
        btn.classList.remove('loading');
        btn.textContent = "Confirm & Send Order";
      }
    });

    document.getElementById('cancelOrder').addEventListener('click', () => {
      document.getElementById('orderModal').style.display = 'none';
    });
  </script>
</body>
</html>
